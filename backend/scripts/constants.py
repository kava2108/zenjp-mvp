"""
スコア計算定数
ZenJP MVP - PHASE3

このファイルには、スコア計算で使用するすべての定数が定義されています。
Day 7で調整対象となる定数です。
"""

# ============================================================
# Valueスコア定数
# ============================================================

# PER（株価収益率）
# 改善版：より広い評価範囲、産業別の基準値を考慮
PER_PERFECT_THRESHOLD = 10.0 # 完璧な値（10倍以下で100点）
PER_BASELINE = 15.0          # 基準値（15倍で70点）
PER_MAX_THRESHOLD = 25.0     # 上限（25倍で0点）
# 注: WallStreetZenなどの実際のシステムではPER > 50でも完全に0点にしないケースが多い

# PBR（株価純資産倍率）
PBR_PERFECT_THRESHOLD = 1.0  # 完璧な値（1.0以下で100点）
PBR_MAX_THRESHOLD = 3.0      # 最大値（これ以上で0点）

# 配当利回り
DIVIDEND_MULTIPLIER = 12.0   # 配当利回り × この値 = スコア（20.0→12.0に調整）
DIVIDEND_MAX_SCORE = 100.0   # 配当スコアの上限

# ============================================================
# Growthスコア定数
# ============================================================

GROWTH_PERFECT_THRESHOLD = 15.0  # 15%以上で100点（20.0→15.0に調整）
GROWTH_BASELINE = 5.0            # 5%で50点（10.0→5.0に調整）
GROWTH_MIN_THRESHOLD = -5.0      # -5%以下で0点

# MVP版では固定値を使用
GROWTH_RATE_FIXED = 10.0  # 固定成長率（10%）

# ============================================================
# Momentumスコア定数
# ============================================================

# RSI（相対力指数）
RSI_PERIOD = 14              # RSI計算期間（14日）
RSI_IDEAL_MIN = 40.0         # 理想範囲の下限
RSI_IDEAL_MAX = 75.0         # 理想範囲の上限（70.0→75.0に調整）
RSI_OVERSOLD = 30.0          # 売られすぎ
RSI_OVERBOUGHT = 80.0        # 買われすぎ（70.0→80.0に調整）

# 出来高変化率
VOLUME_SHORT_PERIOD = 7      # 短期間（7日平均）
VOLUME_LONG_PERIOD = 30      # 長期間（30日平均）
VOLUME_INCREASE_MULTIPLIER = 5.0   # 出来高増加 × この値 = スコア（10.0→5.0に調整）
VOLUME_MAX_SCORE = 100.0           # 出来高スコアの上限

# ============================================================
# 総合スコア重み
# ============================================================

WEIGHT_VALUE = 0.35     # Valueスコアの重み（35%、0.4→0.35に調整）
WEIGHT_GROWTH = 0.40    # Growthスコアの重み（40%、0.3→0.40に調整）
WEIGHT_MOMENTUM = 0.25  # Momentumスコアの重み（25%、0.3→0.25に調整）

# ============================================================
# 業種別スコア重み（MVP版）
# ============================================================
# 銘柄の業種（sector_name）に基づいて、適切な重みを適用

SECTOR_WEIGHTS = {
    '輸送用機器': {      # トヨタ: 安定成長、配当重視
        'value': 0.40,
        'growth': 0.30,
        'momentum': 0.30
    },
    '電気機器': {        # ソニー: 高成長、イノベーション重視
        'value': 0.30,
        'growth': 0.45,
        'momentum': 0.25
    },
    '情報・通信業': {    # ソフトバンク: 高成長、テック重視
        'value': 0.25,
        'growth': 0.50,
        'momentum': 0.25
    }
}

# デフォルト（業種不明の場合）
DEFAULT_WEIGHTS = {
    'value': WEIGHT_VALUE,
    'growth': WEIGHT_GROWTH,
    'momentum': WEIGHT_MOMENTUM
}

# ============================================================
# ランク判定閾値（改善版）
# ============================================================
# 実測市場平均: 63.27点を基準に調整
# - A（75点以上）: 非常に優良企業（全体5%）
# - B+（70点以上）: 優良企業（全体15%）
# - B（60点以上）: 良好企業（全体30%）
# - C+（50点以上）: 平均付近（全体25%）
# - C（40点以上）: 平均以下（全体15%）
# - D（0点以上）: 割高企業（全体10%）

RANK_THRESHOLDS = {
    'A': 75.0,
    'B+': 70.0,
    'B': 60.0,
    'C+': 50.0,
    'C': 40.0,
    'D': 0.0
}

# ============================================================
# 市場平均（中立値として定義）
# ============================================================
# 定義: 50点 = スコア評価の中立点（平均値の意味ではない）
#
# 注記（MVP版での制限）:
# - 現在、サンプル銘柄は3社のみ（トヨタ、ソニー、ソフトバンク）
# - これらは日本を代表する優良企業であり、真の市場平均ではない
# - 実測市場平均（3銘柄の平均）: 63.27点
#   * トヨタ: 55.44点
#   * ソニー: 68.67点
#   * ソフトバンク: 65.70点
#
# フェーズ7以降の改善案:
# - 日経225企業からランダムサンプルを取得
# - より包括的な市場平均を計算
# - セクター別の平均値も計算
#
# 当面は50点を中立値として使用し、個別銘柄の相対評価に注力
MARKET_AVERAGE_TOTAL = 50.0
MARKET_AVERAGE_VALUE = 50.0
MARKET_AVERAGE_GROWTH = 50.0
MARKET_AVERAGE_MOMENTUM = 50.0
